<div class="container">
  <div class="row">
    <div class="col">
      <div class="table-title">
        <h1>Liste des clients</h1>
        <div class="btn-toolbar">
          <button class="btn btn-primary" (click)="print()">Imprimer</button>
          <button class="btn btn-success" (click)="exportToCSV()">Exporter en CSV</button>
         <!-- <button class="btn btn-info" (click)="exportToPDF()">Exporter en PDF</button>-->
        </div>
      </div>
       <!-- Champ de recherche -->
       <div class="form-group">
        <label for="searchTerm">Rechercher :</label>
        <input type="text" id="searchTerm" class="form-control" [(ngModel)]="searchTerm" placeholder="Entrez un terme de recherche">
      </div>
      

      <div class="table-responsive">
        <table class="table table-striped table-bordered">
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th>Numéro de contrat</th>
              <th>Nom</th>
              <th>Débit</th>
              <th>Numéro de série du modem</th>
              <th>Adresse IP</th>
              <th>Contact</th>
              <th>Login</th>
              <th>Mot de passe WiFi</th>
              <th>Mot de passe du routeur</th>
              <th>Adresse MAC</th>
              <th>Date</th>
              <th>Type de convention</th>
              <th>Email</th>
              <th>Date de création</th>
              <th>Date de mise à jour</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let client of filterClients()"
            (mouseenter)="showClientDetails(client)"
            (mouseleave)="hideClientDetails()">
              <td>{{ client.id }}</td>
              <td>{{ client.NumContrat }}</td>
              <td>{{ client.Client }}</td>
              <td>{{ client.Debit }}</td>
              <td>{{ client.NumSerieModem }}</td>
              <td>{{ client.IpAdresse }}</td>
              <td>{{ client.Contact }}</td>
              <td>{{ client.Login }}</td>
              <td>{{ client.WifiPassword }}</td>
              <td>{{ client.RouterPassword }}</td>
              <td>{{ client.MAC }}</td>
              <td>{{ client.DateMESTT }}</td>
              <td>{{ client.TypeConvention }}</td>
              <td>{{ client.MAIL }}</td>
              <td>{{ client.created_at }}</td>
              <td>{{ client.updated_at }}</td>
              <td>
                <button class="btn btn-danger" (click)="deleteClient(client.id)">Supprimer</button>
              </td>
            </tr>
            <!-- Ligne pour afficher les détails du client au survol -->
            <tr *ngIf="hoveredClient">
              <td colspan="4">
                <div class="client-details">
                  <h3>Détails du client</h3>
                  <p><strong>ID:</strong> {{ hoveredClient.id }}</p>
                  <p><strong>Nom:</strong> {{ hoveredClient.Client }}</p>
                  <p><strong>Email:</strong> {{ hoveredClient.MAIL }}</p>
                  <!-- Ajoutez d'autres détails selon vos besoins -->
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="form-group">
        <label for="fileInput">Importer un fichier CSV ou XLSX :</label>
        <input type="file" id="fileInput" (change)="fileChangeListener($event)" accept=".csv,.xlsx">
      </div>
      
    </div>
  </div>
</div>
